<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva - Licenciatura en BiotecnologÃ­a</title>
  <style>
    /* ... mismo CSS que antes ... */
  </style>
</head>
<body>
  <h1>Malla Interactiva - Licenciatura en BiotecnologÃ­a</h1>
  <!-- QUITÃ‰ EL BUSCADOR -->

  <div id="estadisticas">Aprobadas: 0 | Cursando: 0 | Bloqueadas: 0</div>
  <div id="botones">
    <button id="exportar">Exportar progreso</button>
    <button id="importar">Importar progreso</button>
    <input type="file" id="inputImportar" style="display:none" accept=".json" />
  </div>
  <div id="malla"></div>
  <div id="notificacion"></div>

  <script>
    // ... mismo cÃ³digo JS que antes pero quitando toda referencia a filtro ...

    // Render sin filtro:
    function renderMalla() {
      const mallaDiv = document.getElementById("malla");
      mallaDiv.innerHTML = "";

      for (const [anio, cuatris] of Object.entries(materiasPorCuatrimestre)) {
        const anioDiv = document.createElement("div");
        anioDiv.className = "anio";

        const tituloAnio = document.createElement("div");
        tituloAnio.className = "titulo-anio";
        tituloAnio.textContent = anio;
        anioDiv.appendChild(tituloAnio);

        for (const [cuatri, codigos] of Object.entries(cuatris)) {
          const cuatriDiv = document.createElement("div");
          cuatriDiv.className = "cuatrimestre";

          const titulo = document.createElement("div");
          titulo.className = "titulo-cuatrimestre";
          titulo.textContent = cuatri;
          cuatriDiv.appendChild(titulo);

          codigos.forEach(codigo => {
            const materia = materias.find(m => m.codigo === codigo);
            if (!materia) return;

            const div = document.createElement("div");
            div.className = "materia";
            div.id = materia.codigo;
            div.textContent = `${materia.codigo} - ${materia.nombre}`;

            if (!estaDesbloqueada(materia)) {
              div.classList.add("bloqueada");
              div.style.cursor = "default";
            } else {
              div.classList.add("desbloqueada");
              if (aprobadas.has(materia.codigo)) {
                div.classList.add("aprobada");
              } else if (cursando.has(materia.codigo)) {
                div.classList.add("cursando");
              }
            }

            if (materia.correlativas) {
              const correlativasDiv = document.createElement("div");
              correlativasDiv.className = "correlativas";
              correlativasDiv.innerHTML = `<strong>Correlativas:</strong> ${materia.correlativas.join(", ")}`;
              div.appendChild(correlativasDiv);

              div.addEventListener("click", (e) => {
                if (estaDesbloqueada(materia)) {
                  correlativasDiv.style.display = correlativasDiv.style.display === "none" ? "block" : "none";
                }
              });
            }

            // Click simple para marcar cursando
            div.addEventListener("click", (e) => {
              if (!estaDesbloqueada(materia)) return;
              e.stopPropagation();
              if (aprobadas.has(materia.codigo)) return; // si ya aprobada, no cambia a cursando
              if (cursando.has(materia.codigo)) {
                cursando.delete(materia.codigo);
              } else {
                cursando.add(materia.codigo);
              }
              guardarProgreso();
              renderMalla();
            });

            // Doble click para marcar aprobada
            div.addEventListener("dblclick", (e) => {
              if (!estaDesbloqueada(materia)) return;
              e.stopPropagation();
              if (aprobadas.has(materia.codigo)) {
                aprobadas.delete(materia.codigo);
              } else {
                aprobadas.add(materia.codigo);
                cursando.delete(materia.codigo);
                mostrarNotificacion(`Â¡Felicitaciones! Has aprobado ${materia.nombre} ðŸŽ‰`);
              }
              guardarProgreso();
              renderMalla();
            });

            cuatriDiv.appendChild(div);
          });

          anioDiv.appendChild(cuatriDiv);
        }

        mallaDiv.appendChild(anioDiv);
      }

      actualizarEstadisticas();
    }

    // Resto del cÃ³digo igual: exportar/importar, localStorage, etc.

    // Cargar progreso guardado
    cargarProgreso();
    renderMalla();

    // Listeners exportar/importar etc...
    // (los mismos que en el cÃ³digo anterior)
  </script>
</body>
</html>
